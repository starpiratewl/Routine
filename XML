library(XML)
doc <- xmlParse("http://www.w3school.com.cn/example/xmle/books.xml")

## in this example, this is a big node called bookstore
## the next layer is the node called book
## the book node have some attributes named as "category" or "cover"
## the book node have some elements such as "title", "author", "year", "price"
## som of the elemets of the book node have some attribute such as "lang" attribute in the "title" element

## select the first book node
getNodeSet(doc, '/bookstore/book[1]')

## select the last book node
getNodeSet(doc, '/bookstore/book[last()]')

## select the first two book node
getNodeSet(doc, '/bookstore/book[position() < 3]')

## select the title element which has a lang attribute
getNodeSet(doc, '//title[@lang]')

## select the title element which has a lang attribute and the attribute = eng
getNodeSet(doc, "//title[@lang = 'en']")

## select all book node which price element is more than 35 in the bookstore
getNodeSet(doc, '/bookstore/book[price > 35]')

## select the title element of all book node which price element is more than 35  in the bookstore
getNodeSet(doc, '/bookstore/book[price > 35]/title')

## select the title element and price element of all the book nodes
getNodeSet(doc, '//book/title | //book/price')

## select the title and price element from the whole xml file
getNodeSet(doc, '//title | //price')

## select all the sub-node of bookstore
getNodeSet(doc, '/bookstore/*')

## select all the title element which have an attribute
getNodeSet(doc, '//title[@*]')

## select all the values of the lang attribute of the title element
unlist(getNodeSet(doc, "//title/@lang"), use.names = F)
unlist(getNodeSet(doc, "//title/@lang"), use.names = T)

## select all the text(value) of the title element
getNodeSet(doc, "//title/text()")


################################################
## further learning
################################################

urlaa <- "http://www.w3school.com.cn/example/xmle/books.xml"
doc <- xmlTreeParse(urlaa, useInternal = T, encoding = "UTF-8")

## get the root node
top <- xmlRoot(doc)

## get the sub-root node
top[[5]]

## get the name of the sub-root node
xmlName(top[[5]])

## get the sub-root node according to name
top[[name]]













